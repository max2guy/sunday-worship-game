<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï£ºÏùº ÏÑ±Ïàò - ÏòÅÏ†Å Ï†ÑÏüÅ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Lucide Icons Í∞ÑÎã® Íµ¨ÌòÑ
        const Icon = ({ name, className = "", strokeWidth = 2 }) => {
            const icons = {
                Trophy: "M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 21h16M6 21v-5M18 21v-5M12 3v18M8 3h8M8 6h8",
                Volume2: "M11 5L6 9H2v6h4l5 4V5zM19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07",
                VolumeX: "M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6",
                Church: "M10 3v3M14 3v3M10 6h4M3 21h18M6 21V11M18 21V11M12 21V9M12 3L3 11h18L12 3z",
                Sun: "M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0z",
                Moon: "M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",
                Smartphone: "M5 2h10a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm5 14h.01",
                Coffee: "M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z",
                Book: "M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 19.5A2.5 2.5 0 0 0 6.5 22H20V2H6.5A2.5 2.5 0 0 0 4 4.5v15z",
                Users: "M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M8.5 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm7.5 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2 10v-2a4 4 0 0 0-3-3.87",
                Tv: "M20 7h-9M10 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM8 3l4 4m0 0l4-4",
                MessageCircle: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",
                Home: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",
                Play: "M5 3l14 9-14 9V3z",
                Award: "M12 15a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm-3 6l3-3 3 3m-3-3v4"
            };
            
            return (
                <svg className={className} fill="none" stroke="currentColor" strokeWidth={strokeWidth} viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" d={icons[name] || ""} />
                </svg>
            );
        };

        const SundayWorshipGame = () => {
            const [gameStarted, setGameStarted] = useState(false);
            const [playerName, setPlayerName] = useState('');
            const [currentScene, setCurrentScene] = useState('intro');
            const [spiritualHealth, setSpiritualHealth] = useState(50);
            const [choices, setChoices] = useState([]);
            const [isMuted, setIsMuted] = useState(false);
            const [showHealth, setShowHealth] = useState(false);
            const [showLeaderboard, setShowLeaderboard] = useState(false);
            const [leaderboard, setLeaderboard] = useState([]);
            const audioContextRef = useRef(null);
            const oscillatorsRef = useRef([]);

            useEffect(() => {
                loadLeaderboard();
            }, []);

            const loadLeaderboard = () => {
                try {
                    const saved = localStorage.getItem('sunday_game_leaderboard');
                    if (saved) {
                        setLeaderboard(JSON.parse(saved));
                    }
                } catch (e) {
                    console.log('No leaderboard found');
                }
            };

            const saveToLeaderboard = (score) => {
                try {
                    const newEntry = {
                        name: playerName || 'ÏùµÎ™Ö',
                        score: score,
                        date: new Date().toLocaleDateString('ko-KR')
                    };

                    const updatedLeaderboard = [...leaderboard, newEntry]
                        .sort((a, b) => b.score - a.score)
                        .slice(0, 10);

                    localStorage.setItem('sunday_game_leaderboard', JSON.stringify(updatedLeaderboard));
                    setLeaderboard(updatedLeaderboard);
                } catch (e) {
                    console.log('Failed to save score:', e);
                }
            };

            const startBackgroundMusic = () => {
                try {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    if (!audioContextRef.current) {
                        audioContextRef.current = new AudioContext();
                    }

                    const chords = [
                        [261.63, 329.63, 392.00],
                        [220.00, 261.63, 329.63],
                        [174.61, 220.00, 261.63],
                        [196.00, 246.94, 293.66]
                    ];

                    let chordIndex = 0;

                    const playChord = () => {
                        if (!audioContextRef.current || isMuted) return;

                        oscillatorsRef.current.forEach(osc => {
                            try { osc.stop(); } catch(e) {}
                        });
                        oscillatorsRef.current = [];

                        if (audioContextRef.current.state === 'suspended') {
                            audioContextRef.current.resume();
                        }

                        const currentChord = chords[chordIndex];
                        currentChord.forEach(freq => {
                            const osc = audioContextRef.current.createOscillator();
                            const gainNode = audioContextRef.current.createGain();

                            osc.type = 'sine';
                            osc.frequency.value = freq;
                            gainNode.gain.value = isMuted ? 0 : 0.04;

                            osc.connect(gainNode);
                            gainNode.connect(audioContextRef.current.destination);

                            osc.start();
                            oscillatorsRef.current.push(osc);
                        });

                        chordIndex = (chordIndex + 1) % chords.length;
                        setTimeout(playChord, 2000);
                    };

                    playChord();
                } catch (e) {
                    console.log('Audio not supported:', e);
                }
            };

            const handleStartGame = () => {
                if (!playerName.trim()) {
                    alert('Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }
                startBackgroundMusic();
                setGameStarted(true);
            };

            const playClickSound = () => {
                if (isMuted) return;
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.value = 600;
                    oscillator.type = 'sine';
                    gainNode.gain.value = 0.1;
                    oscillator.start();
                    setTimeout(() => oscillator.stop(), 100);
                } catch (e) {}
            };

            const scenes = {
                intro: {
                    title: "Ï£ºÏùº ÏïÑÏπ® 7Ïãú",
                    description: "ÏïåÎûåÏù¥ Ïö∏Î¶ΩÎãàÎã§. Ïñ¥Ï†ØÎ∞§ ÏÉàÎ≤Ω 2ÏãúÍπåÏßÄ ÎÑ∑ÌîåÎ¶≠Ïä§Î•º Î¥§ÏäµÎãàÎã§. Î™∏ÏùÄ Ï≤úÍ∑ºÎßåÍ∑º... ÌïòÏßÄÎßå Ïò§ÎäòÏùÄ Ï£ºÏùºÏûÖÎãàÎã§. ÏòàÎ∞∞Îäî 10ÏãúÏóê ÏãúÏûëÎê©ÎãàÎã§.",
                    icon: "Sun",
                    gradient: "from-yellow-300 via-orange-400 to-red-400",
                    choices: [
                        { text: "ÏïåÎûåÏùÑ ÎÅÑÍ≥† '5Î∂ÑÎßå Îçî...'ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÎ©∞ Îã§Ïãú ÎààÏùÑ Í∞êÎäîÎã§", result: "snooze_trap", spiritual: -10 },
                        { text: "ÌûòÎì§ÏßÄÎßå ÏùºÏñ¥ÎÇòÏÑú ÏîªÍ≥† ÍµêÌöå Í∞à Ï§ÄÎπÑÎ•º ÌïúÎã§", result: "morning_wake", spiritual: 10 }
                    ]
                },
                snooze_trap: {
                    title: "30Î∂Ñ ÌõÑ",
                    description: "ÏïåÎûåÏù¥ Îã§Ïãú Ïö∏Î¶ΩÎãàÎã§. 7Ïãú 30Î∂Ñ... Ïù¥Ï†ú Ï¢Ä Îä¶ÏóàÎÑ§Ïöî. Ìï∏ÎìúÌè∞ÏùÑ Î≥¥Îãà ÏπúÍµ¨Îì§ Îã®ÌÜ°Î∞©Ïù¥ Î∂àÏù¥ ÎÇ¨ÏäµÎãàÎã§. 'Ïò§Îäò ÎÇ†Ïî® ÎØ∏Ï≥§Îã§! ÌïúÍ∞ï Í∞à ÏÇ¨Îûå?' ÏÇ¨ÏßÑÏùÑ Î≥¥Îãà Ï†ïÎßê ÎÇ†Ïî®Í∞Ä Ï¢ãÏïÑ Î≥¥ÏûÖÎãàÎã§.",
                    icon: "MessageCircle",
                    gradient: "from-green-300 via-teal-400 to-cyan-500",
                    verse: { text: "ÎÑàÌù¨Í∞Ä Ìï®Íªò Î™®Ïù¥Í∏∞Î•º ÌèêÌïòÎäî Ïñ¥Îñ§ ÏÇ¨ÎûåÎì§Ïùò ÏäµÍ¥ÄÍ≥º Í∞ôÏù¥ ÌïòÏßÄ ÎßêÍ≥† Ïò§ÏßÅ Í∂åÌïòÏó¨ Í∑∏ ÎÇ†Ïù¥ Í∞ÄÍπåÏõÄÏùÑ Î≥ºÏàòÎ°ù ÎçîÏö± Í∑∏Î¶¨ÌïòÏûê", reference: "ÌûàÎ∏åÎ¶¨ÏÑú 10:25" },
                    lesson: "ÏûëÏùÄ Ïú†ÌòπÏù¥ ÌÅ∞ Í≤∞Í≥ºÎ•º ÎßåÎì≠ÎãàÎã§.",
                    choices: [
                        { text: "'ÍµêÌöåÎäî Îã§ÏùåÏ£ºÏóê Í∞ÄÍ≥† Ïò§ÎäòÏùÄ ÏπúÍµ¨Îì§Ïù¥Îûë...' Îã®ÌÜ°Ïóê 'ÎÇòÎèÑ Í∞àÍ≤å'ÎùºÍ≥† ÎãµÌïúÎã§", result: "friends_choice", spiritual: -25 },
                        { text: "'ÏïÑÏßÅ Ïïà Îä¶ÏóàÏñ¥!' ÏÑúÎëòÎü¨ ÏùºÏñ¥ÎÇò Ï§ÄÎπÑÌïúÎã§", result: "church_arrival", spiritual: 5 }
                    ]
                },
                morning_wake: {
                    title: "ÏïÑÏπ® Í∏∞ÎèÑ",
                    description: "ÏùºÏñ¥ÎÇòÏÑú Î¨¥Î¶éÏùÑ ÍøáÍ≥† ÏßßÍ≤å Í∏∞ÎèÑÌï©ÎãàÎã§. 'Ï£ºÎãò, Ïò§ÎäòÎèÑ...' Í∑∏Îü∞Îç∞ Ìï∏ÎìúÌè∞ÏóêÏÑú ÏïåÎ¶ºÏù¥ Í≥ÑÏÜç Ïö∏Î¶ΩÎãàÎã§.",
                    icon: "Book",
                    gradient: "from-blue-300 via-indigo-400 to-purple-500",
                    verse: { text: "Ïó¨Ìò∏ÏôÄÎ•º Í∏∞Îã§Î¶¨Îäî ÏûêÎäî ÏÉà ÌûòÏùÑ ÏñªÏúºÎ¶¨Îãà", reference: "Ïù¥ÏÇ¨Ïïº 40:31" },
                    lesson: "ÏïÑÏπ®Ïùò ÏûëÏùÄ ÏÑ†ÌÉùÏù¥ ÌïòÎ£®Î•º Í≤∞Ï†ïÌï©ÎãàÎã§.",
                    choices: [
                        { text: "Ìï∏ÎìúÌè∞ÏùÑ ÌôïÏù∏ÌïúÎã§. 'Í∏âÌïú Ïó∞ÎùΩÏùº ÏàòÎèÑ ÏûàÏûñÏïÑ'", result: "friends_choice", spiritual: -8 },
                        { text: "Ìï∏ÎìúÌè∞ÏùÑ Î©ÄÎ¶¨ÌïòÍ≥† Í∏∞ÎèÑÏôÄ ÎßêÏîÄ Î¨µÏÉÅÏùÑ Í≥ÑÏÜçÌïúÎã§", result: "church_arrival", spiritual: 15 }
                    ]
                },
                friends_choice: {
                    title: "ÌïúÍ∞ïÏúºÎ°ú",
                    description: "ÏπúÍµ¨Îì§Í≥º ÎßåÎÇò ÌïúÍ∞ïÏóê Í∞ëÎãàÎã§. Ï†ïÎßê Ï¶êÍ≤ÅÏäµÎãàÎã§. Í∑∏Îü∞Îç∞ Ïò§ÌõÑÍ∞Ä ÎêòÏûê... Í≥µÌóàÌï®Ïù¥ Î∞ÄÎ†§ÏòµÎãàÎã§.",
                    icon: "Coffee",
                    gradient: "from-sky-300 via-blue-400 to-indigo-500",
                    verse: { text: "ÎÇ¥Í∞Ä Ìï¥ ÏïÑÎûòÏóêÏÑú Ìïú Î™®Îì† ÏùºÏùÑ Î≥∏Ï¶â Îã§ ÌóõÎêòÏñ¥", reference: "Ï†ÑÎèÑÏÑú 2:11" },
                    lesson: "ÏÑ∏ÏÉÅÏùò Ï¶êÍ±∞ÏõÄÏùÄ ÏàúÍ∞ÑÏ†ÅÏûÖÎãàÎã§.",
                    choices: [
                        { text: "'Îã§ÏùåÏ£ºÏóî Íº≠ Í∞ÄÏïºÏßÄ' ÌïòÎ©∞ Í≥ÑÏÜç ÎÖºÎã§", result: "bad_ending", spiritual: -30 },
                        { text: "ÌöåÍ∞úÌïòÎ©∞ Í∏∞ÎèÑÌïúÎã§", result: "neutral_ending", spiritual: -10 }
                    ]
                },
                church_arrival: {
                    title: "ÍµêÌöå ÎèÑÏ∞©",
                    description: "ÍµêÌöåÏóê ÎèÑÏ∞©ÌñàÏäµÎãàÎã§. ÏòàÎ∞∞Í∞Ä ÏãúÏûëÎê©ÎãàÎã§. Ï∞¨Ïñë ÏãúÍ∞Ñ... Í∑∏Îü∞Îç∞ ÏòÜ ÏÇ¨ÎûåÏùò Ìï∏ÎìúÌè∞ÏóêÏÑú ÏßÑÎèôÏù¥ Í≥ÑÏÜç ÏòµÎãàÎã§.",
                    icon: "Church",
                    gradient: "from-blue-400 via-indigo-500 to-purple-600",
                    verse: { text: "ÎÑàÌù¨ Î™∏ÏùÑ ÌïòÎÇòÎãòÏù¥ Í∏∞ÎªêÌïòÏãúÎäî Í±∞Î£©Ìïú ÏÇ∞ Ï†úÎ¨ºÎ°ú ÎìúÎ¶¨Îùº", reference: "Î°úÎßàÏÑú 12:1" },
                    lesson: "ÏòàÎ∞∞Ïùò ÏûêÎ¶¨Ïóê ÏôîÏßÄÎßå, ÎßàÏùåÏùÑ ÏßÄÌÇ§Îäî Í≤ÉÏù¥ Îçî Ï§ëÏöîÌï©ÎãàÎã§.",
                    choices: [
                        { text: "'Í∏âÌïú ÏùºÏùº ÏàòÎèÑ...' ÏÇ¥Ïßù Ìï∏ÎìúÌè∞ÏùÑ ÌôïÏù∏ÌïúÎã§", result: "neutral_ending", spiritual: -15 },
                        { text: "Ìï∏ÎìúÌè∞ÏùÑ Í∞ÄÎ∞© ÍπäÏàôÏù¥ ÎÑ£Í≥† ÏòàÎ∞∞ÏóêÎßå ÏßëÏ§ëÌïúÎã§", result: "good_ending", spiritual: 20 }
                    ]
                },
                good_ending: {
                    title: "ÏäπÎ¶¨ÌïòÎäî ÏÇ∂",
                    description: "ÏòàÎ∞∞Î•º ÎßàÏπòÍ≥† ÎèåÏïÑÏò§Îäî Í∏∏, ÎßàÏùåÏóê Í∏∞ÏÅ®Í≥º ÌèâÏïàÏù¥ Í∞ÄÎìùÌï©ÎãàÎã§. Ï£ºÏùºÏùÑ ÏßÄÌÇ® Í≤ÉÏù¥ ÏïÑÎãàÎùº, Ï£ºÏùºÏù¥ ÎãπÏã†ÏùÑ ÏßÄÏº∞ÏäµÎãàÎã§.",
                    icon: "Trophy",
                    gradient: "from-yellow-300 via-amber-400 to-orange-500",
                    verse: { text: "Ïó¨Ìò∏ÏôÄÎ°ú ÎßêÎØ∏ÏïîÏïÑ Í∏∞ÏÅ®ÏùÑ ÎàÑÎ¶¨Îùº", reference: "ÏãúÌé∏ 37:4" },
                    lesson: "ÏòàÎ∞∞Îäî Ïã†ÏûêÍ∞Ä ÌïòÎÇòÎãòÏùÑ ÎßåÎÇòÎäî ÏùÄÌòúÏùò ÏûêÎ¶¨ÏûÖÎãàÎã§.",
                    isEnding: true,
                    endingType: "good"
                },
                neutral_ending: {
                    title: "Îòê Îã§Î•∏ Í∏∞Ìöå",
                    description: "Ìïú Ï£ºÎ•º ÏïÑÏâΩÍ≤å Î≥¥ÎÉàÏäµÎãàÎã§. ÌïòÏßÄÎßå ÌïòÎÇòÎãòÏùÄ ÏùÄÌòúÎ°úÏö∞ÏÖîÏÑú Îã§Ïãú Í∏∞ÌöåÎ•º Ï£ºÏã≠ÎãàÎã§.",
                    icon: "Sun",
                    gradient: "from-orange-300 via-yellow-400 to-amber-500",
                    verse: { text: "Ïó¨Ìò∏ÏôÄÏùò Ïù∏ÏûêÌïòÏã¨ÏùÄ Î¨¥Í∂ÅÌïòÏãúÎ©∞", reference: "ÏòàÎ†àÎØ∏ÏïºÏï†Í∞Ä 3:22-23" },
                    lesson: "ÏãúÍ∞ÑÏùÄ ÎèåÏïÑÏò§ÏßÄ ÏïäÏäµÎãàÎã§.",
                    isEnding: true,
                    endingType: "neutral"
                },
                bad_ending: {
                    title: "ÏòÅÏ†Å Ïπ®Ï≤¥Ïùò Îä™",
                    description: "Ïñ¥ÎäêÏÉà ÏòàÎ∞∞Îäî ÏÑ†ÌÉùÏÇ¨Ìï≠Ïù¥ ÎêòÏóàÏäµÎãàÎã§. ÏòÅÏ†ÅÏúºÎ°ú Î©îÎßêÎùºÍ∞ÄÍ≥† ÏûàÏäµÎãàÎã§.",
                    icon: "Moon",
                    gradient: "from-red-600 via-rose-700 to-pink-800",
                    verse: { text: "Ïö∞Î¶¨Í∞Ä ÏßÑÎ¶¨Î•º ÏïÑÎäî ÏßÄÏãùÏùÑ Î∞õÏùÄ ÌõÑ ÏßêÏßì Ï£ÑÎ•º Î≤îÌïúÏ¶â", reference: "ÌûàÎ∏åÎ¶¨ÏÑú 10:26" },
                    lesson: "ÌöåÍ∞úÌïòÍ≥† ÎèåÏïÑÏò§Ïã≠ÏãúÏò§. ÏïÑÏßÅ Îä¶ÏßÄ ÏïäÏïòÏäµÎãàÎã§.",
                    isEnding: true,
                    endingType: "bad"
                }
            };

            const handleChoice = (choice) => {
                playClickSound();
                const newChoice = { 
                    scene: currentScene, 
                    choice: choice.text,
                    spiritual: choice.spiritual,
                    sceneTitle: scene.title
                };
                setChoices([...choices, newChoice]);
                const newHealth = Math.max(0, Math.min(100, spiritualHealth + choice.spiritual));
                setSpiritualHealth(newHealth);
                
                setTimeout(() => {
                    setCurrentScene(choice.result);
                    const nextScene = scenes[choice.result];
                    if (nextScene && nextScene.isEnding) {
                        setShowHealth(true);
                        saveToLeaderboard(newHealth);
                    }
                    window.scrollTo(0, 0);
                }, 300);
            };

            const getScoreAnalysis = () => {
                const goodChoices = choices.filter(c => c.spiritual > 0);
                const badChoices = choices.filter(c => c.spiritual < 0);
                
                let analysis = "";
                
                if (spiritualHealth >= 80) {
                    analysis = `üåü ÌÉÅÏõîÌïú Ïã†ÏïôÏÉùÌôú! ÎãπÏã†ÏùÄ ${goodChoices.length}Î≤àÏùò ÏÑ†Ìïú ÏÑ†ÌÉùÏùÑ ÌñàÏäµÎãàÎã§. `;
                    if (goodChoices.length >= 3) {
                        analysis += "ÏïÑÏπ® Í∏∞ÎèÑ, ÏòàÎ∞∞ ÏßëÏ§ë, ÏÑ±ÎèÑÏùò ÍµêÏ†ú Îì± ÏòÅÏ†ÅÏúºÎ°ú ÏÑ±ÏàôÌïú Î™®ÏäµÏùÑ Î≥¥Ïó¨Ï£ºÏÖ®ÏäµÎãàÎã§.";
                    }
                } else if (spiritualHealth >= 60) {
                    analysis = `‚úùÔ∏è Í±¥Í∞ïÌïú Ïã†Ïïô! ${goodChoices.length}Î≤àÏùò Ï¢ãÏùÄ ÏÑ†ÌÉùÍ≥º ${badChoices.length}Î≤àÏùò ÏïÑÏâ¨Ïö¥ ÏÑ†ÌÉùÏù¥ ÏûàÏóàÏäµÎãàÎã§. `;
                    if (badChoices.length > 0) {
                        analysis += "ÏûëÏùÄ Ïú†ÌòπÎì§Ïù¥ ÏûàÏóàÏßÄÎßå Í≤∞Íµ≠ ÏòàÎ∞∞Î•º ÏßÄÏºúÎÉàÏäµÎãàÎã§.";
                    }
                } else if (spiritualHealth >= 40) {
                    analysis = `‚öñÔ∏è Î≥¥ÌÜµÏùò Ïã†Ïïô. ${badChoices.length}Î≤àÏùò Ïú†ÌòπÏóê ÎÑòÏñ¥Í∞îÏäµÎãàÎã§. `;
                    if (badChoices.some(c => c.sceneTitle?.includes("Ìï∏ÎìúÌè∞"))) {
                        analysis += "ÌäπÌûà Ìï∏ÎìúÌè∞ Ïú†ÌòπÏù¥ ÌÅ∞ Í±∏Î¶ºÎèåÏù¥ÏóàÏäµÎãàÎã§.";
                    } else if (badChoices.some(c => c.sceneTitle?.includes("ÏπúÍµ¨"))) {
                        analysis += "ÏπúÍµ¨Îì§Í≥ºÏùò ÏïΩÏÜçÏù¥ ÏòàÎ∞∞Î≥¥Îã§ Ïö∞ÏÑ†ÏàúÏúÑÍ∞Ä ÎêòÏóàÏäµÎãàÎã§.";
                    }
                } else if (spiritualHealth >= 20) {
                    analysis = `‚ö†Ô∏è Ïó∞ÏïΩÌïú Ïã†Ïïô. ${badChoices.length}Î≤àÏùò ÏûòÎ™ªÎêú ÏÑ†ÌÉùÏúºÎ°ú ÏòÅÏ†ÅÏúºÎ°ú ÌûòÎì† ÏÉÅÌÉúÏûÖÎãàÎã§. `;
                    if (badChoices.some(c => c.choice.includes("ÌïúÍ∞ï"))) {
                        analysis += "ÏÑ∏ÏÉÅÏùò Ï¶êÍ±∞ÏõÄÏùÑ ÏòàÎ∞∞Î≥¥Îã§ ÏÑ†ÌÉùÌñàÍ≥†, ";
                    }
                    if (badChoices.some(c => c.choice.includes("Ïò®ÎùºÏù∏"))) {
                        analysis += "ÌòïÏãùÏ†ÅÏù∏ ÏòàÎ∞∞Î°ú ÌÉÄÌòëÌñàÏäµÎãàÎã§. ";
                    }
                    analysis += "Îã§Ïùå Ï£ºÏùºÏóêÎäî Îçî ÎÇòÏùÄ ÏÑ†ÌÉùÏùÑ ÌïòÏãúÍ∏∏ Î∞îÎûçÎãàÎã§.";
                } else {
                    analysis = `üö® ÏúÑÌóòÌïú ÏÉÅÌÉú! ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÑ†ÌÉù(${badChoices.length}Î≤à)Ïù¥ ÏÑ∏ÏÉÅÏùÑ Ìñ•ÌñàÏäµÎãàÎã§. `;
                    if (badChoices.some(c => c.choice.includes("Îã§ÏùåÏ£º"))) {
                        analysis += "'Îã§ÏùåÏ£ºÏóê...'ÎùºÎäî ÏÉùÍ∞ÅÏù¥ Ïã†ÏïôÏùÑ Î¨¥ÎÑàÎú®Î†∏ÏäµÎãàÎã§. ";
                    }
                    analysis += "ÌöåÍ∞úÌïòÍ≥† ÌïòÎÇòÎãòÍªò ÎèåÏïÑÏôÄÏïº Ìï† ÎïåÏûÖÎãàÎã§.";
                }
                
                return analysis;
            };

            const restartGame = () => {
                setCurrentScene('intro');
                setSpiritualHealth(50);
                setShowHealth(false);
                setShowLeaderboard(false);
            };

            const scene = scenes[currentScene];

            const getEndingMessage = () => {
                if (spiritualHealth >= 80) return { text: "ÌÉÅÏõîÌïú Ïã†Ïïô", color: "text-green-600" };
                if (spiritualHealth >= 60) return { text: "Í±¥Í∞ïÌïú Ïã†Ïïô", color: "text-blue-600" };
                if (spiritualHealth >= 40) return { text: "Î≥¥ÌÜµÏùò Ïã†Ïïô", color: "text-yellow-600" };
                if (spiritualHealth >= 20) return { text: "Ïó∞ÏïΩÌïú Ïã†Ïïô", color: "text-orange-600" };
                return { text: "ÏúÑÌóòÌïú ÏÉÅÌÉú", color: "text-red-600" };
            };

            if (!gameStarted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-md w-full">
                            <Icon name="Church" className="w-24 h-24 mx-auto mb-6 text-purple-600" />
                            <h1 className="text-4xl font-bold text-gray-800 mb-4 text-center">Ï£ºÏùº ÏÑ±Ïàò</h1>
                            <h2 className="text-2xl font-semibold text-purple-600 mb-8 text-center">ÏòÅÏ†Å Ï†ÑÏüÅ</h2>
                            
                            <div className="mb-6">
                                <label className="block text-gray-700 font-medium mb-2">Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî</label>
                                <input
                                    type="text"
                                    value={playerName}
                                    onChange={(e) => setPlayerName(e.target.value)}
                                    placeholder="Ïòà: ÍπÄÏÑ±ÎèÑ"
                                    maxLength={10}
                                    className="w-full px-4 py-3 border-2 border-purple-300 rounded-xl focus:border-purple-600 focus:outline-none text-lg"
                                />
                            </div>
                            
                            <button
                                onClick={handleStartGame}
                                className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-lg hover:shadow-lg mb-4"
                            >
                                Í≤åÏûÑ ÏãúÏûë
                            </button>
                            
                            <button
                                onClick={() => setShowLeaderboard(!showLeaderboard)}
                                className="w-full bg-gradient-to-r from-amber-500 to-yellow-500 text-white py-3 rounded-xl font-bold"
                            >
                                Î™ÖÏòàÏùò Ï†ÑÎãπ
                            </button>
                            
                            {showLeaderboard && leaderboard.length > 0 && (
                                <div className="mt-6 bg-gray-50 rounded-2xl p-4">
                                    <h3 className="font-bold text-gray-800 mb-3 text-center">üèÜ Î™ÖÏòàÏùò Ï†ÑÎãπ TOP 10</h3>
                                    <div className="space-y-2">
                                        {leaderboard.map((entry, idx) => (
                                            <div key={idx} className={`flex justify-between items-center p-2 rounded-lg ${
                                                idx === 0 ? 'bg-yellow-100' :
                                                idx === 1 ? 'bg-gray-200' :
                                                idx === 2 ? 'bg-orange-100' : 'bg-white'
                                            }`}>
                                                <div className="flex items-center gap-2">
                                                    <span className="font-bold text-purple-600 w-6">{idx + 1}ÏúÑ</span>
                                                    <span className="font-medium">{entry.name}</span>
                                                </div>
                                                <div className="text-right">
                                                    <span className="font-bold text-purple-600">{entry.score}Ï†ê</span>
                                                    <span className="text-xs text-gray-500 block">{entry.date}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            <p className="text-gray-500 text-sm mt-6 text-center">
                                üéµ Î∞∞Í≤ΩÏùåÏïÖÏù¥ Ìï®Íªò Ïû¨ÏÉùÎê©ÎãàÎã§
                            </p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4">
                    <div className="max-w-3xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-md rounded-2xl p-4 mb-4 text-white">
                            <div className="flex justify-between items-center">
                                <span className="font-bold">{playerName}ÎãòÏùò Ï£ºÏùº</span>
                                <button onClick={() => setIsMuted(!isMuted)} className="p-2 hover:bg-white/20 rounded-lg">
                                    <Icon name={isMuted ? "VolumeX" : "Volume2"} className="w-5 h-5" />
                                </button>
                            </div>
                        </div>

                        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
                            <div className={`h-64 bg-gradient-to-br ${scene.gradient} flex items-center justify-center relative`}>
                                <div className="absolute inset-0 bg-black/10"></div>
                                <Icon name={scene.icon} className="w-40 h-40 text-white/90 relative z-10" strokeWidth={1.5} />
                            </div>

                            <div className="p-8">
                                <h2 className="text-3xl font-bold text-gray-800 mb-4 text-center">{scene.title}</h2>
                                
                                <div className="bg-gray-50 rounded-2xl p-6 mb-6">
                                    <p className="text-gray-700 leading-relaxed text-lg">{scene.description}</p>
                                </div>

                                {scene.verse && (
                                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-l-4 border-indigo-600">
                                        <p className="text-gray-800 italic mb-2">"{scene.verse.text}"</p>
                                        <p className="text-indigo-600 font-bold text-sm mb-3">- {scene.verse.reference}</p>
                                        {scene.lesson && (
                                            <div className="pt-3 border-t border-indigo-200">
                                                <p className="text-gray-700 text-sm">üí° {scene.lesson}</p>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {scene.isEnding ? (
                                    <div className="space-y-4">
                                        <div className={`rounded-2xl p-6 text-center ${
                                            scene.endingType === 'good' ? 'bg-green-50 border-2 border-green-300' :
                                            scene.endingType === 'bad' ? 'bg-red-50 border-2 border-red-300' :
                                            'bg-yellow-50 border-2 border-yellow-300'
                                        }`}>
                                            <Icon name="Trophy" className={`w-16 h-16 mx-auto mb-4 ${
                                                scene.endingType === 'good' ? 'text-green-600' :
                                                scene.endingType === 'bad' ? 'text-red-600' : 'text-yellow-600'
                                            }`} />
                                            <h3 className="text-2xl font-bold text-gray-800 mb-2">
                                                {scene.endingType === 'good' ? '‚úùÔ∏è Ï¢ãÏùÄ ÏóîÎî©' :
                                                 scene.endingType === 'bad' ? '‚ö†Ô∏è ÎÇòÏÅú ÏóîÎî©' : '‚öñÔ∏è Î≥¥ÌÜµ ÏóîÎî©'}
                                            </h3>
                                            
                                            {showHealth && (
                                                <div className="mt-4 pt-4 border-t">
                                                    <p className="text-gray-600 mb-2">ÏµúÏ¢Ö ÏòÅÏ†Å ÏÉÅÌÉú</p>
                                                    <div className="bg-gray-200 rounded-full h-6 overflow-hidden mb-2">
                                                        <div 
                                                            className={`h-full ${
                                                                spiritualHealth >= 70 ? 'bg-green-500' :
                                                                spiritualHealth >= 40 ? 'bg-yellow-500' : 'bg-red-500'
                                                            }`}
                                                            style={{ width: `${spiritualHealth}%` }}
                                                        />
                                                    </div>
                                                    <p className={`text-2xl font-bold ${getEndingMessage().color}`}>
                                                        {spiritualHealth}Ï†ê - {getEndingMessage().text}
                                                    </p>
                                                    
                                                    <div className="mt-4 bg-white/50 rounded-lg p-4">
                                                        <p className="text-sm font-bold text-gray-800 mb-2">üìã Ï†êÏàò Î∂ÑÏÑù</p>
                                                        <p className="text-sm text-gray-700 leading-relaxed">
                                                            {getScoreAnalysis()}
                                                        </p>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                        
                                        <button onClick={restartGame} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-lg">
                                            Îã§Ïãú ÏãúÏûëÌïòÍ∏∞
                                        </button>
                                        
                                        <button
                                            onClick={() => setShowLeaderboard(!showLeaderboard)}
                                            className="w-full bg-gradient-to-r from-amber-500 to-yellow-500 text-white py-3 rounded-xl font-bold"
                                        >
                                            {showLeaderboard ? 'Î™ÖÏòàÏùò Ï†ÑÎãπ Îã´Í∏∞' : 'Î™ÖÏòàÏùò Ï†ÑÎãπ Î≥¥Í∏∞'}
                                        </button>
                                        
                                        {showLeaderboard && leaderboard.length > 0 && (
                                            <div className="bg-gray-50 rounded-2xl p-4">
                                                <h3 className="font-bold text-gray-800 mb-3 text-center">üèÜ TOP 10</h3>
                                                <div className="space-y-2">
                                                    {leaderboard.map((entry, idx) => (
                                                        <div key={idx} className="flex justify-between p-2 rounded-lg bg-white">
                                                            <span>{idx + 1}. {entry.name}</span>
                                                            <span className="font-bold">{entry.score}Ï†ê</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {scene.choices.map((choice, idx) => (
                                            <button 
                                                key={idx} 
                                                onClick={() => handleChoice(choice)} 
                                                className="w-full bg-white hover:bg-gray-50 border-2 border-gray-300 rounded-xl p-5 text-left"
                                            >
                                                <div className="flex items-center gap-3">
                                                    <div className="w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold">
                                                        {idx + 1}
                                                    </div>
                                                    <p className="text-gray-800 font-medium flex-1">{choice.text}</p>
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="mt-4 bg-white/10 backdrop-blur-md rounded-2xl p-4 text-white text-center text-sm">
                            <p>"ÌïòÎÇòÎãòÏùÑ Í∞ÄÍπåÏù¥Ìï®Ïù¥ ÎÇ¥Í≤å Î≥µÏù¥Îùº" - ÏãúÌé∏ 73:28</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<SundayWorshipGame />, document.getElementById('root'));
    </script>
</body>
</html>
